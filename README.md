<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [vuejs-sandbox](#vuejs-sandbox)
- [01：はじめに](#01)
	- [ソースコード](#)
- [02：Vue インスタンス](#02vue-)
- [03：テンプレート構文](#03構文)
- [04：算出プロパティとウォッチャ](#04算出)
- [05：クラスとスタイルのバインディング](#05)
- [06：条件付きレンダリング](#06条件付)
- [07：リストレンダリング](#07)
- [08：イベントハンドリング](#08)
- [09：フォーム入力バインディング](#09入力)
- [10：コンポーネントの基本](#10基本)
	- [コンポーネントの構成](#構成)
	- [プロパティを使用した子コンポーネントへのデータの受け渡し](#使用子受渡)
	- [イベントとメッセージを親コンポーネントに送出する](#親送出)
	- [スロットによるコンテンツ配信](#配信)
	- [動的なコンポーネント](#動的)
- [11：コンポーネントの登録](#11登録)
- [12：プロパティ](#12)
- [13：カスタムイベント](#13)
- [14：スロット](#14)
- [15：動的＆非同期コンポーネント](#15動的非同期)
- [16：特別な問題に対処する](#16特別問題対処)
- [17：Enter/Leave とトランジション一覧](#17enterleave-一覧)
- [18：状態のトランジション](#18状態)
- [19：ミックス院](#19院)
- [20：カスタムディレクティブ](#20)
- [21：描画関数と JSX](#21描画関数-jsx)
- [22：プラグイン](#22)
- [23：フィルター](#23)
- [24：プロダクション環境への配信](#24環境配信)
- [25：単一ファイルコンポーネント](#25単一)
- [26：単体テスト](#26単体)
- [27：TypeScript のサポート](#27typescript-)
- [28：ルーティング](#28)
- [29：状態管理](#29状態管理)
- [30：サーバサイドレンダリング](#30)

<!-- /TOC -->

# vuejs-sandbox

# 01：はじめに

- 宣言的レンダリング
  - データとDOMは関連づけられ，そして全てがリアクティブになっている．
  - `v-bind:title="message"`：要素の `title` 属性を Vue インスタンスの `message` プロパティによって更新して保存する
- 条件分岐
  - `v-if`
- ループ
  - `v-for`
- ユーザー入力の制御
  - `v-on`：イベントリスナを加え，Vue インスタンスのメソッドを呼び出す
  - `v-model`：双方向バインディング
- コンポーネントによる構成
  - 「小さく，自己完結的で，再利用可能なコンポーネント」を組み合わせることで，大規模アプリケーションを構築することが可能になる．
  - コンポーネント：あらかじめ定義されたオプションを持つ Vue インスタンスである
  - 登録には，`Vue.component()` を用いる．

## ソースコード

- [index.html](./01_introduction/index.html)
- [index.js](./01_introduction/index.js)
- [index.css](./01_introduction/index.css)

# 02：Vue インスタンス

- Vue インスタンスとは
	- `Vue` 関数：Vue インスタンスの作成
	- 生成には，オプションオブジェクトを渡す
	- アプリケーションは，`new Vue` で作成されたルート Vue インスタンスで構成される．必要に応じてネストされたツリーや再利用可能なコンポーネントで形成される．
- データとメソッド
	- Vue インスタンスが作成されると，自身の `data` オブジェクトの全てのプロパティをリアクティブシステムに追加する．
	- リアクティブシステムに追加されたプロパティは，データ変更時にビューが再レンダリングされる．
	- 初期値を設定することによって，リアクティブシステムに追加することができる．
	- `Object.freeze()` を用いると，変更は追跡されなくなる．
	- Vue インスタンスがすでに持っているプロパティとメソッドは，ユーザ定義のプロパティと区別するために，頭に `$` がつけられる．
- インスタンスライフサイクルフック
	- インスタンス生成時，一連の初期化が行われる．
		- （例）データの監視のセットアップ，テンプレートのコンパイル，DOMへのインスタンスのマウント，データが変化したときのDOMの更新
	- ライフサイクルフック：初期化の過程でユーザ自身のコードを追加するための関数
		- （例）`created`, `mounted`, `updated`, `destroyed`
	- インスタンスプロパティまたはコールバックでアロー関数を使用してはいけない．アロー関数は親コンテキストに束縛されるので，`this`は期待通りに Vue インスタンスにならない．

# 03：テンプレート構文

- テキスト
	- Mustache 構文を利用したテキスト展開：二重中括弧で囲む
	- `v-once` ディレクティブ：データ変更時の更新を行わず，一度だけ展開することができる
- 生のHTML
	- Mustache 構文は，データをHTMLではなく，プレーンなテキストとして扱う．
	- 実際のHTMLとして出力するためには，`v-html` ディレクティブを用いる．
- 属性
	- Mustache は，HTML属性の内部で使用することはできない．代わりに `v-bind` ディレクティブを使用する．
- JavaScript 式の使用
	- Vue.js は全てのデータバインディング内部で JavaScript 式を完全にサポートする．
	- それぞれのバインディングは，単一の式だけ含むことができる．
- ディレクティブ
	- ディレクティブは，`v-` から始まる特別な属性である．
	- 属性値は，単一の JavaScript 式が期待される．
	- 属性値の式が変化した時に，リアクティブに副作用をDOMに適用する．
	- 引数
		- ディレクティブ名の後にコロンで表記する．
		- (e.g.) `v-bind:href="url"`, `v-on:click="doSomething"`
	- 修飾子 (Modifier)
		- ドットで表記された特別な接尾語で，ディレクティブが特別な方法で束縛されるべきということを示す．
- 省略記法
	- `v-bind` 省略記法
		- `v-bind:href="url"` → `:href="url"`
	- `v-on` 省略記法
		- `v-on:click="doSomething"` → `:@click="doSomethng"`

# 04：算出プロパティとウォッチャ

- 算出プロパティ (computed propery)
	- vue インスタンスのプロパティに `computed` プロパティとして定義される getter 関数．
	- 算出プロパティは，それが依存するものが更新された時にだけ再評価される．
- 監視プロパティ (watched property)
- 算出 setter 関数
	- 算出プロパティはデフォルトでは getter 関数のみだが，必要があれば setter 関数も使える．
- ウォッチャ
	- カスタムウォッチャ
	- データが変わるのに応じて非同期やコストの高い処理を実行したい時に便利である．

# 05：クラスとスタイルのバインディング

- Vue は，`v-bind` が `class` と `style` と一緒に使われる時，特別な拡張機能を提供する．文字列だけではなく，式はオブジェクトまたは配列を返すことができる．
- HTML クラスのバインディング
	- オブジェクト構文
		- `v-bind:class` にオブジェクトを渡すことでクラスを動的に切り替えることができる．
		- 束縛されるオブジェクトは，インラインでもよいし，オブジェクトを返す算出プロパティに束縛してもよい．
	- 配列構文
		- `v-bind:class` に配列を渡してクラスのリストを適用することができる．
- インラインスタイルのバインディング
	- オブジェクト構文
	- 配列構文
	- 自動プリフィックス

# 06：条件付きレンダリング

- テンプレートでの `v-if` による条件グループ
	- 複数要素に適用したい場合，`<template>` 要素で `v-if` を使用する．
- `v-else`
	- `v-if` に対して "else block" を示すために，`v-else` ディレクティブが使用される．
	- `v-if` または `v-else-if` 要素の直後になければならない．
- `v-else-if`
	- `v-if` の "else if block" として機能する．
- `v-show`
	- 条件的に要素を表示するためのディレクティブである．
	- `v-show` による要素は常に描画されて DOM に維持する．

# 07：リストレンダリング

- `v-for`
	- `item in items` の形式で特別な構文を要求し，`items` はソースデータの配列で，`item` は配列要素がその上で反復されているエイリアスである．
	- カスタムコンポーネントでも直接使うことができる．

# 08：イベントハンドリング

- `v-on`
	- DOM イベントの購読，イベント発火時の JavaScript の実行を可能にする．
- イベント修飾子
	- イベントハンドラ内での `event.preventDefault()` または `event.stopPropagation()` の呼び出しは，様々な場面で共通に必要になる．
	- この問題に対応するために，Vue は `v-on` のためにイベント修飾子を提供する．
	- e.g. `.stop`, `.prevent`, `.capture`, `.self`, `.once`, `.passive`
- キー修飾子
	- キーコードのチェックを可能にする．
	- e.g. `.enter`, `.tab`, `.delete`, `.esc`, `.space`, `.up`, `.down`, `.left`, `.right`
- システム修飾子キー
	- 対応するキーが押されたときのみマウスもしくはキーボードのイベントリスナをトリガできる．
	- e.g. `.ctrl`, `.alt`, `.shift`, `.meta`

# 09：フォーム入力バインディング

- form の input 要素や textarea 要素，select 要素に双方向データバインディングを作成するには，`v-model` ディレクティブを使用することができる．
- 修飾子
	- `.lazy`
		- `change` イベント後にデータと入力を同期したいときに使う．デフォルトでは，`v-model` は各 `input` イベント後にデータと入力を同期する．
	- `.number`
		- ユーザの入力を数値として自動的に型変換したいときに使う．
	- `.trim`
		- ユーザの入力を自動的にトリムしたいときに使う．

# 10：コンポーネントの基本

- コンポーネントは名前付きの再利用可能な Vue インスタンスである．そのため，`data`，`computed`，`watch`，`methods`，ライフサイクルフックなどの `new Vue` と同じオプションを受け入れる．ただし，`el` のようなルート固有のオプションは受け入れない．
- コンポーネントの再利用
- `data` は関数でなければならない．各インスタンスが返されるデータオブジェクトの独立したコピーを保持できるため．

## コンポーネントの構成

- コンポーネント登録には，グローバルとローカルの2種類がある．
- グローバルに登録されたコンポーネントは，その後に作成されたルート Vue インスタンスのテンプレートで使用できる．

## プロパティを使用した子コンポーネントへのデータの受け渡し

- プロパティはコンポーネントに登録できるカスタム属性である．
- `props` オプションを使用すると，そのコンポーネントが受け入れるプロパティのリストに対象のものを含めることができる．

## イベントとメッセージを親コンポーネントに送出する

- 親コンポーネントにイベントを送出するには，ビルトインの `$emit` メソッドを呼び出し，イベントの名前を渡す．
- 一方で，親コンポーネントは，子コンポーネントから送出されたイベントを `v-on` でリッスンすることができる．
- カスタムイベントは `v-model` で動作するカスタム入力を作成することもできる．

## スロットによるコンテンツ配信

- コンポーネントにコンテンツを配置したい場合，スロットを使うと便利である．

## 動的なコンポーネント

- タブ付きのインタフェースのように，コンポーネント間を動的に切り替えたい場合，Vue の `<component>` 要素と特別な属性の `is` を使用する．
- 詳しくは，動的 & 非同期コンポーネントのガイドへ．

# 11：コンポーネントの登録

- コンポーネント名
	- コンポーネントを登録するときは，いつでも名前が与えられる．
	- 命名のケース
		- ケバブケース：`'my-component-name'` と登録すると，参照は `<my-component-name>` のみ．
		- パスカルケース：`'MyComponentName'`と登録すると，参照は `<my-component-name>` または `<MyComponentName>` のどちらか．
- グローバル登録
	- `Vue.component` で作成すると，コンポーネントはグローバル登録される．
	- 全てのルート Vue インスタンスのテンプレート内で使用できる．
	- 全てのサブコンポーネントにも適用される．
	- ユーザーがダウンロードしなくてはならない JavaScript のファイルサイズを不要に増加させてしまうので，理想的でない．
- ローカル登録
	- コンポーネントを素の JavaScript オブジェクトとして定義する．
	- `var ComponentA = { /* ... */ }` と定義する．
	- `components` オプション内に使いたいコンポーネントを定義する．
	- ローカル登録されたコンポーネントは，他のサブコンポーネント内では使用できない．
- モジュールシステム
	- Babel と Webpack のようなものを用いてモジュールシステムを使用する場合に必要な項目です．
	- それぞれのコンポーネントをファイルとして配置する `components` ディレクトリを作成する．
	- ローカル登録する前に，使いたいコンポーネントごとにインポートする．
	- 基底コンポーネント
		- input や button のような要素をラップしたもので，複数のコンポーネントを横断して用いられる．
		- Webpack を利用している場合，汎用的な基底コンポーネントのグローバル登録に `require.context` を用いることができる．

# 12：プロパティ

- DOM (HTML) のテンプレート内においては，キャメルケースのプロパティはケバブケースを使用する必要がある．
- プロパティの型
	- プロパティのキーと値に，それぞれのプロパティ名と型を設定したオブジェクトの配列として，プロパティを列挙することができる．
- 静的あるいは動的なプロパティの受け渡し
	- プロパティには任意の型の値を渡すことができる．
- 単方向のデータフロー
	- 全てのプロパティは，子プロパティと親プロパティの間に，単方向のデータフローを形成する．
	- 親コンポーネントが更新されるたび，子コンポーネント内の全てのプロパティが最新の値へと更新されます．
	- プロパティの値を変化させる場合には2つのケースがある：(1)プロパティを初期値として受け渡し，子コンポーネントにてローカルのデータとしてあとで利用したいと考える場合，プロパティの値をローカルの data の初期値として定義する：

```js
props: ['initialCounter'],
data: function () {
	return {
		counter: this.initialCounter
	}
}
```

	- (2) プロパティを未加工の値として渡す場合，プロパティの値を使用した算出プロパティを別途定義する：

```js
props: ['size'],
computed: {
	normalizedSize: function () {
		return this.size.trim().toLowerCase()
	}
}
```

- プロパティのバリデーション
	- コンポーネントは，プロパティに対して既存の型などの要件を指定することができる．
	- バリデーションは，文字列の配列の代わりに，`props` の値へとバリデーションの条件をもったオブジェクトを渡すことで指定できる：

```js
Vue.component('my-component', {
	props: {
		propA: Number,
		propB: [String, Number],
		propC: {
			type: String,
			required: true
		},
		propD: {
			type: Number,
			default: 100
		},
		propE: {
			type: Object,
			// オブジェクトもしくは配列のデフォルト値は，
			// 必ずそれを生み出すための関数を返す必要がある．
			default: function () {
				return { message: 'hello' }
			}
		},
		// カスタマイズしたバリデーション関数
		propF: {
			validator: function (value) {
				// プロパティの値は，必ずいずれかの文字列でなければならない
				return ['success', 'warning', 'danger'].indexOf(value) !== -1
			}
		}
	}
})
```

	- バリデーションが失敗した場合，Vue はコンソールにて警告する．
	- `type` は，次のネイティブコンストラクタのいずれか：String, Number, Boolean, Array, Object, Data, Function, Symbol

# 13：カスタムイベント

# 14：スロット

# 15：動的＆非同期コンポーネント

# 16：特別な問題に対処する

# 17：Enter/Leave とトランジション一覧

# 18：状態のトランジション

# 19：ミックス院

# 20：カスタムディレクティブ

# 21：描画関数と JSX

# 22：プラグイン

# 23：フィルター

# 24：プロダクション環境への配信

# 25：単一ファイルコンポーネント

# 26：単体テスト

# 27：TypeScript のサポート

# 28：ルーティング

# 29：状態管理

# 30：サーバサイドレンダリング
